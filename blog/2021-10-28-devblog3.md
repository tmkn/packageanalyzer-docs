---
slug: devblog3
title: "Devblog #3 - Testing CLI output"
author: Thomas Klein
#author_title: Front End Engineer @ Facebook
author_url: https://twitter.com/tmkndev
author_image_url: https://avatars.githubusercontent.com/u/2671613?v=4&s=400
tags: [packageanalyzer, devblog, typescript]
description: This edition is all about testing the CLI output as well as why the unit tests suddenly broke in September.
keywords: [packageanalyzer, devblog, typescript]
---

## Introduction
In this edition I'll talk about how while on vacation the unit tests suddenly started to fail and also how I test the CLI for the correct output.
<!--truncate-->
## Unit Tests suddenly broke
I spent the whole month of September in Colombia, I didn't plan on even writing one line of code. Spoiler Alert: I actually kept true to this promise, I knew there was a problem in my Open Source project but I just didn't fix it üòÅ. I waited until I'm back home).

However some days into my vacation after having spent every day eating awesome Colombian food like Empanadas, Arepas (sorry üáªüá™, no me pegan porfa), Salchipapas, Mojarra Frita, Carne Oreada, Carne Mamona, Carima√±ola I thought a change is due.

So I fired up my Surface Go, which is my favorite on the go device, since you get a real windows and thus a real dev environment. Pulled the newest changes, installed dependencies, ran unit tests and... they fail.

[pic of failed unit tests]

As much as I like the Go, it's also slow so maybe it hit a timeout (which happenend before). But no, it didn't fail because of a timeout error.

What's even stranger is that dependabot PR's in Github ran fine, yet it fails on my machine.
Furthermore if I used the `packageanalyzer` it would fail too...strange.

It cannot resolve the dependencies. Weird, maybe the internet connection of the hotel is blocking NPM but why could I install the dependencies just fine?

Anyway since I was on vacation and I didn't plan on doing any sort of programming, let alone debugging I left it at that. However I did check if dependabot added new PR's. He did and they also now fail. That's at least something, a common ground.

When I came back from vacation I looked at it again and I remember vaguely that Github announced that it will deprecate `http` access to NPM.

And sure enough, this was the problem. The packageanalzyer was accessing NPM via `http`. Switching to `https` fixed the problem. The packageanalyzer works again.

All I had to do was literally replace all NPM `http` urls in the code with `https`.
[screenshot showing the change]

### Making the unit tests offline capable

## Testing the CLI output
todo

## Improving the `Reports` developer experience
todo